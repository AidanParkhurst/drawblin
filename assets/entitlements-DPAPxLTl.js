import{i as l,r as s,e as o,b as c}from"./auth-Newij3tP.js";let e=null,n=null;async function m(i=!1){if(!l())return null;await s();const t=c();if(!t)return e=null,null;if(!i&&e&&Date.now()-e.fetched_at<3e4)return e;if(n)return n;const a=o();return a?(n=a.from("user_entitlements").select("has_premium, pet_pack, win_bling_pack, more_goblins_pack").eq("user_id",t.id).maybeSingle().then(({data:u,error:r})=>(n=null,r?(console.warn("fetchEntitlements error:",r.message),null):(e={...u||{},fetched_at:Date.now()},e))),n):null}function _(){return e}typeof window<"u"&&window.addEventListener("auth:user-changed",()=>{e=null});function h(){return!!e?.has_premium}function p(){return!!(e?.pet_pack||e?.has_premium)}function d(){return!!(e?.win_bling_pack||e?.has_premium)}function g(){return!!(e?.more_goblins_pack||e?.has_premium)}export{d as a,g as b,h as c,_ as e,m as f,p as h};
