:root {
  --ink: rgba(30,30,30,0.8);
  --ink-soft: rgba(30,30,30,0.6);
  --ink-faint: rgba(30,30,30,0.2);
}

.shop-body {
  margin: 0;
  min-height: 100vh;
  background: #f0f0f0;
  font-family: 'Neucha', cursive;
  /* Override global body rules from index.css (canvas page) */
  display: block;
  justify-content: initial;
  align-items: initial;
  overflow: auto;
  height: auto;
}

.shop-main {
  width: min(1100px, 92vw);
  margin: 60px auto 40px auto; /* tighter vertical margins */
}

.shop-header h1 {
  margin: 0 0 2px 0;
  font-size: 34px; /* reduced */
  line-height: 1.05;
  color: var(--ink);
}
.shop-sub { margin: 0 0 20px 0; color: var(--ink-soft); font-size: 16px; }

.shop-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 14px; /* slightly tighter */
}
@media (max-width: 980px) {
  .shop-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 620px) {
  .shop-grid { grid-template-columns: 1fr; }
}

/* Wide card spans all columns at the top */
.shop-card--wide {
  grid-column: 1 / -1;
  display: flex; /* horizontal layout */
  flex-direction: row !important;
  align-items: center;
  gap: 16px;
  padding: 14px 16px;
  min-height: 118px;
  position: relative; /* for price alignment */
}
.shop-card--wide .shop-card__content { flex: 1; }

/* Premium wide card banner layout */
.shop-card--wide[data-key="premium"] .shop-card__media--icon {
  width: auto;
  height: auto;
  background: transparent;
}
.shop-card--wide[data-key="premium"] .shop-card__media {
  flex: 0 0 65%; /* use ~65% of row width for banner */
  aspect-ratio: auto; /* don't constrain to 4/3 for banner */
  display: block;
}
.shop-card--wide[data-key="premium"] .shop-card__media img {
  width: 100%;
  height: auto;
  object-fit: contain; /* ensure full banner visible */
  border-radius: 10px;
}

@media (max-width: 820px) {
  .shop-card--wide[data-key="premium"] .shop-card__media { flex-basis: 60%; }
}
@media (max-width: 620px) {
  .shop-card--wide[data-key="premium"] { flex-direction: column !important; align-items: stretch; }
  .shop-card--wide[data-key="premium"] .shop-card__media { flex-basis: auto; }
}

/* Slightly larger icon just for the wide membership card */
.shop-card--wide .shop-card__media--icon {
  width: 72px;
  height: 72px;
  font-size: 40px;
}
.shop-card__media--icon {
  font-size: 34px;
  width: 60px; height: 60px;
  display: grid; place-items: center;
  border-radius: 10px;
  background: rgba(240,240,240,0.5);
}
.shop-card__content .shop-card__fineprint {
  margin: 4px 2px 0 2px;
  font-size: 13px;
  color: rgba(30,30,30,0.45);
}

/* Back to game link â€” same as login page */
.back-link {
  position: fixed;
  top: 12px;
  left: 12px;
}
.back-link a {
  text-decoration: none;
  font-size: 20px;
  font-family: 'Neucha';
  color: rgba(30, 30, 30, 0.5);
  transition: 0.2s all;
}
.back-link a:hover {
  color: rgba(30, 30, 30, 0.8);
}

.shop-card {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  border: 3px dashed var(--ink-faint);
  border-radius: 12px;
  background: rgba(240,240,240,0);
  cursor: pointer;
  transition: 0.18s all;
  outline: none;
  position: relative; /* for price positioning */
}
.shop-card:hover, .shop-card:focus-visible {
  border-color: rgba(30,30,30,0.4);
  transform: scale(1.03); /* smaller scale to reduce overflow */
}
.shop-card__media {
  display: flex; align-items: center; justify-content: center;
  aspect-ratio: 4/3; border-radius: 10px;
  /* no border around media per request */
  transition: 0.2s all;
}
.shop-card__media img { max-width: 100%; max-height: 100%; object-fit: cover; border-radius: 8px; display: block; }
/* removed hover border effect on media */
.shop-card__title { margin: 4px 2px 0 2px; font-size: 19px; color: var(--ink); line-height:1.15; }
.shop-card__desc { margin: 0 2px 4px 2px; font-size: 15px; color: var(--ink-soft); line-height:1.2; }

/* Price badge */
.shop-card__price {
  position: absolute;
  right: 12px; /* mirror horizontal card padding */
  bottom: 10px; /* default for normal cards */
  display: flex;
  align-items: flex-end;
  font-family: 'Neucha';
  color: #36a957; /* lighter green */
  text-shadow: 0 1px 0 rgba(255,255,255,0.55);
  pointer-events: none; /* clicks pass through */
}
.shop-card--wide .shop-card__price {
  top: 50%; bottom: auto; transform: translateY(-50%);
}
.shop-card__price .price-symbol { font-size: 14px; line-height: 1; margin-right: 1px; transform: translateY(-1px); }
.shop-card__price .price-dollars { font-size: 34px; line-height: 0.9; }
.shop-card__price .price-decimal { font-size: 18px; line-height: 1; margin: 0 0 0 2px; }
.shop-card__price .price-cents { font-size: 18px; line-height: 1; margin-left: 1px; }
.shop-card__price .price-period { font-size: 14px; line-height: 1; color: rgba(30,30,30,0.55); margin-left: 6px; transform: translateY(2px); }

@media (max-width: 620px) {
  .shop-card__price .price-dollars { font-size: 28px; }
  .shop-card__price .price-symbol { font-size: 14px; }
  .shop-card__price .price-decimal { font-size: 15px; }
  .shop-card__price .price-cents { font-size: 16px; }
}

/* Modal */
.modal { position: fixed; inset: 0; z-index: 1100; }
.modal__backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.35); }
.modal__dialog {
  position: absolute; left: 50%; top: 5vh; transform: translateX(-50%);
  width: min(1000px, 92vw); max-height: 90vh; overflow: auto; overflow-x: hidden;
  background: rgba(240,240,240,1);
  border-radius: 14px; box-shadow: 0 10px 40px rgba(0,0,0,0.25);
  border: 3px dashed var(--ink-faint);
}
.modal__close {
  position: absolute; right: 8px; top: 8px; width: 36px; height: 36px;
  border-radius: 10px; border: 3px dashed var(--ink-faint);
  background: rgba(255,255,255,0);
  font-family: 'Neucha'; font-size: 22px; color: var(--ink);
  cursor: pointer; transition: 0.2s all;
}
.modal__close:hover { border-color: rgba(30,30,30,0.35); }
.modal__content { display: grid; grid-template-columns: 1.2fr 1fr; gap: 0; }

@media (max-width: 820px) { .modal__content { grid-template-columns: 1fr; } }

.modal__left { padding: 12px; overflow: visible; }
.modal__right { padding: 16px 16px 20px 6px; display: flex; flex-direction: column; }
/* Prevent flex children from forcing a minimum width that can grow the modal
  (helps when images or many thumbnails would otherwise expand the container). */
.modal__content > * { min-width: 0; }
.modal__title { margin: 6px 0 6px 0; font-size: 28px; color: var(--ink); }
.modal__desc { margin: 0 0 16px 0; font-size: 18px; color: var(--ink-soft); }
.modal__desc { white-space: pre-line; }
.modal__cta { margin-top: auto; }

/* Small includes/fineprint text above the buy button */
.modal__includes { margin: 6px 0 10px 0; font-size: 14px; color: rgba(30,30,30,0.6); white-space: pre-line; }

.btn-buy {
  width: 100%; padding: 12px 14px; font-size: 20px; font-family: 'Neucha';
  display: block; /* ensure full width for anchors */
  box-sizing: border-box; /* include border in width to prevent overflow */
  border: 3px dashed rgba(30,150,80,0.35); border-radius: 12px;
  background: linear-gradient(135deg, #34d399, #10b981);
  color: white; cursor: pointer; transition: 0.2s all; text-shadow: 0 1px 0 rgba(0,0,0,0.2);
  text-decoration: none; /* anchors inherit this */
  text-align: center; /* center label for both button and anchor */
}
.btn-buy:hover { transform: scale(1.04); filter: saturate(1.1) brightness(1.02); }
.btn-buy:disabled { opacity: 0.7; cursor: not-allowed; }

/* Carousel */
.carousel { position: relative; border-radius: 10px; overflow: visible; width: 100%; max-width: 100%; box-sizing: border-box; }
.carousel__viewport { background: rgb(240); display: grid; place-items: center; aspect-ratio: 4/3; width: 100%; box-sizing: border-box; }
.carousel__image { width: 100%; height: auto; max-width: 100%; max-height: 60vh; object-fit: contain; display: block; }

/* Make sure large images don't leap out of the dialog -- cap their height */
.carousel__viewport img, .carousel__image { max-height: 60vh; }

/* Ensure nav buttons and close button render above images */
.carousel__nav, .modal__close { z-index: 9999; }

/* Allow the carousel to show nav controls even when the image edges are tight */
.carousel { overflow: visible; }

/* Prevent modal scroll from propagating to the page behind it on touch / wheel */
.modal__dialog {
  -webkit-overflow-scrolling: touch; /* smooth native scrolling on iOS */
  overscroll-behavior: contain; /* prevent scrolling the body when at edges */
}

/* Ensure touch pan gestures are delivered to the dialog (vertical only) so the page
   behind doesn't steal the scroll on mobile devices. */
.modal__dialog { touch-action: pan-y; }

@media (max-width: 620px) {
  /* On small screens keep carousel nav visible and cap image height further */
  .carousel { overflow: visible; }
  .carousel__viewport { height: min(40vh, 56vw); }
  .carousel__viewport img, .carousel__image { max-height: 40vh; }

  /* Make thumbnails smaller on mobile so a long strip doesn't feel huge */
  .carousel__thumb { width: 48px; height: 36px; }
}

/* On narrow screens move the CTA above the description so the primary action is immediately visible */
@media (max-width: 820px) {
  .modal__right { display: flex; flex-direction: column; }
  .modal__title { order: 0; }
  .modal__cta { order: 1; margin-top: 0; margin-bottom: 12px; }
  .modal__desc { order: 2; }
  .modal__includes { order: 3; }
}

/* Mobile-specific carousel constraints: limit height so the image doesn't dominate the popup
   and so the modal can still show description/cta without overflowing permanently. */
@media (max-width: 620px) {
  .carousel__viewport { aspect-ratio: auto; height: min(40vh, 56vw); }
  .carousel__image { max-height: 100%; width: auto; }
}
.carousel__nav {
  position: absolute; top: 50%; transform: translateY(-50%);
  width: 44px; height: 44px; border-radius: 10px; border: 3px dashed var(--ink-faint);
  background: rgba(255,255,255,0); backdrop-filter: blur(2px);
  font-family: 'Neucha'; font-size: 24px; color: var(--ink);
  cursor: pointer; transition: 0.2s all;
}
.carousel__nav:hover { border-color: rgba(30,30,30,0.35); }
.carousel__nav--prev { left: 8px; }
.carousel__nav--next { right: 8px; }

.carousel__thumbs { display: flex; gap: 8px; margin-top: 8px; overflow-x: auto; overflow-y: hidden; max-width: 100%; box-sizing: border-box; }
.carousel__thumb {
  width: 64px; height: 48px; border-radius: 8px; border: 3px dashed var(--ink-faint);
  background: rgba(240,240,240,1); display: grid; place-items: center; cursor: pointer; flex: 0 0 auto; transition: 0.2s all;
}
.carousel__thumb:hover, .carousel__thumb--active { border-color: rgba(30,30,30,0.4); transform: scale(1.05); }
